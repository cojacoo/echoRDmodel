# coding=utf-8

#import cPickle as pickle
import pickle as pickle
import pandas

#pickle mc module and reload the same

def mcpick_in(mc,fname):
	mc_D_pickle=pickle.dumps(mc.D)
	mc_FC_pickle=pickle.dumps(mc.FC)
	mc_a_velocity_pickle=pickle.dumps(mc.a_velocity)
	mc_a_velocity_real_pickle=pickle.dumps(mc.a_velocity_real)
	mc_cH2O_pickle=pickle.dumps(mc.cH2O)
	mc_dpsidtheta_pickle=pickle.dumps(mc.dpsidtheta)
	mc_grid_sizefac_pickle=pickle.dumps(mc.grid_sizefac)
	mc_inimf_pickle=pickle.dumps(mc.inimf)
	mc_ku_pickle=pickle.dumps(mc.ku)
	mc_macbf_pickle=pickle.dumps(mc.macbf)
	mc_maccap_pickle=pickle.dumps(mc.maccap)
	mc_maccells_pickle=pickle.dumps(mc.maccells)
	mc_maccols_pickle=pickle.dumps(mc.maccols)
	mc_macconnect_pickle=pickle.dumps(mc.macconnect)
	mc_macid_pickle=pickle.dumps(mc.macid)
	mc_macscalefac_pickle=pickle.dumps(mc.macscalefac)
	mc_macshare_pickle=pickle.dumps(mc.macshare)
	mc_mactopfill_pickle=pickle.dumps(mc.mactopfill)
	mc_macposix_pickle=pickle.dumps(mc.macposix)
	mc_matrixbf_pickle=pickle.dumps(mc.matrixbf)
	mc_matrixdef_pickle=pickle.dumps(mc.matrixdef)
	mc_matrixdeffi_pickle=pickle.dumps(mc.matrixdeffi)
	mc_md_area_pickle=pickle.dumps(mc.md_area)
	mc_md_contact_pickle=pickle.dumps(mc.md_contact)
	mc_md_depth_pickle=pickle.dumps(mc.md_depth)
	mc_md_pos_pickle=pickle.dumps(mc.md_pos)
	mc_md_share_pickle=pickle.dumps(mc.md_share)
	mc_md_macdepth_pickle=pickle.dumps(mc.md_macdepth)
	mc_mgrid_pickle=pickle.dumps(mc.mgrid)
	mc_mxdepth_cr_pickle=pickle.dumps(mc.mxdepth_cr)
	mc_onepartpercell_pickle=pickle.dumps(mc.onepartpercell)
	mc_outdir_pickle=pickle.dumps(mc.outdir)
	mc_p_cH2O_pickle=pickle.dumps(mc.p_cH2O)
	mc_p_ku_pickle=pickle.dumps(mc.p_ku)
	mc_p_th_pickle=pickle.dumps(mc.p_th)
	mc_part_sizefac_pickle=pickle.dumps(mc.part_sizefac)
	mc_precf_pickle=pickle.dumps(mc.precf)
	mc_psi_pickle=pickle.dumps(mc.psi)
	mc_refarea_pickle=pickle.dumps(mc.refarea)
	mc_smooth_pickle=pickle.dumps(mc.smooth)
	mc_soildepth_pickle=pickle.dumps(mc.soildepth)
	mc_soilgrid_pickle=pickle.dumps(mc.soilgrid)
	mc_soilmatrix_pickle=pickle.dumps(mc.soilmatrix)
	mc_stain_res_pickle=pickle.dumps(mc.stain_res)
	mc_subsfac_pickle=pickle.dumps(mc.subsfac)
	mc_t_cdf_fast_pickle=pickle.dumps(mc.t_cdf_fast)
	mc_t_cdf_slow_pickle=pickle.dumps(mc.t_cdf_slow)
	mc_t_dini_pickle=pickle.dumps(mc.t_dini)
	mc_t_dmn_pickle=pickle.dumps(mc.t_dmn)
	mc_t_dmx_pickle=pickle.dumps(mc.t_dmx)
	mc_t_end_pickle=pickle.dumps(mc.t_end)
	mc_theta_pickle=pickle.dumps(mc.theta)
	mc_tracer_horgrid_pickle=pickle.dumps(mc.tracer_horgrid)
	mc_tracer_t_ex_pickle=pickle.dumps(mc.tracer_t_ex)
	mc_tracer_vertgrid_pickle=pickle.dumps(mc.tracer_vertgrid)
	mc_tracerbf_pickle=pickle.dumps(mc.tracerbf)
	mc_wd_pickle=pickle.dumps(mc.wd)
	mc_zgrid_pickle=pickle.dumps(mc.zgrid)

	mc_pickle=pickle.dumps([mc_D_pickle,mc_FC_pickle,mc_a_velocity_pickle,mc_a_velocity_real_pickle,mc_cH2O_pickle,mc_dpsidtheta_pickle,mc_grid_sizefac_pickle,mc_inimf_pickle,mc_ku_pickle,mc_macbf_pickle,mc_maccap_pickle,mc_maccells_pickle,mc_maccols_pickle,mc_macconnect_pickle,mc_macid_pickle,mc_mactopfill_pickle,mc_macposix_pickle,mc_macscalefac_pickle,mc_macshare_pickle,mc_matrixbf_pickle,mc_matrixdef_pickle,mc_matrixdeffi_pickle,mc_md_area_pickle,mc_md_contact_pickle,mc_md_depth_pickle,mc_md_pos_pickle,mc_md_share_pickle,mc_md_macdepth_pickle,mc_mgrid_pickle,mc_mxdepth_cr_pickle,mc_onepartpercell_pickle,mc_outdir_pickle,mc_p_cH2O_pickle,mc_p_ku_pickle,mc_p_th_pickle,mc_part_sizefac_pickle,mc_precf_pickle,mc_psi_pickle,mc_refarea_pickle,mc_smooth_pickle,mc_soildepth_pickle,mc_soilgrid_pickle,mc_soilmatrix_pickle,mc_stain_res_pickle,mc_subsfac_pickle,mc_t_cdf_fast_pickle,mc_t_cdf_slow_pickle,mc_t_dini_pickle,mc_t_dmn_pickle,mc_t_dmx_pickle,mc_t_end_pickle,mc_theta_pickle,mc_tracer_horgrid_pickle,mc_tracer_t_ex_pickle,mc_tracer_vertgrid_pickle,mc_tracerbf_pickle,mc_wd_pickle,mc_zgrid_pickle])

	f = open(fname,"wb")
	pickle.dump(mc_pickle, f, protocol=2)
	f.close()
	print('wrote mc to '+fname)

def mcpick_out(mc,fname):
	f = open(fname,"rb")
	mc_pickle_l = pickle.load(f)
	f.close()

	[mc_D_pickle,mc_FC_pickle,mc_a_velocity_pickle,mc_a_velocity_real_pickle,mc_cH2O_pickle,mc_dpsidtheta_pickle,mc_grid_sizefac_pickle,mc_inimf_pickle,mc_ku_pickle,mc_macbf_pickle,mc_maccap_pickle,mc_maccells_pickle,mc_maccols_pickle,mc_macconnect_pickle,mc_macid_pickle,mc_mactopfill_pickle,mc_macposix_pickle,mc_macscalefac_pickle,mc_macshare_pickle,mc_matrixbf_pickle,mc_matrixdef_pickle,mc_matrixdeffi_pickle,mc_md_area_pickle,mc_md_contact_pickle,mc_md_depth_pickle,mc_md_pos_pickle,mc_md_share_pickle,mc_md_macdepth_pickle,mc_mgrid_pickle,mc_mxdepth_cr_pickle,mc_onepartpercell_pickle,mc_outdir_pickle,mc_p_cH2O_pickle,mc_p_ku_pickle,mc_p_th_pickle,mc_part_sizefac_pickle,mc_precf_pickle,mc_psi_pickle,mc_refarea_pickle,mc_smooth_pickle,mc_soildepth_pickle,mc_soilgrid_pickle,mc_soilmatrix_pickle,mc_stain_res_pickle,mc_subsfac_pickle,mc_t_cdf_fast_pickle,mc_t_cdf_slow_pickle,mc_t_dini_pickle,mc_t_dmn_pickle,mc_t_dmx_pickle,mc_t_end_pickle,mc_theta_pickle,mc_tracer_horgrid_pickle,mc_tracer_t_ex_pickle,mc_tracer_vertgrid_pickle,mc_tracerbf_pickle,mc_wd_pickle,mc_zgrid_pickle]=pickle.loads(mc_pickle_l)

	mc.D=pickle.loads(mc_D_pickle)
	mc.FC=pickle.loads(mc_FC_pickle)
	mc.a_velocity=pickle.loads(mc_a_velocity_pickle)
	mc.a_velocity_real=pickle.loads(mc_a_velocity_real_pickle)
	mc.cH2O=pickle.loads(mc_cH2O_pickle)
	mc.dpsidtheta=pickle.loads(mc_dpsidtheta_pickle)
	mc.grid_sizefac=pickle.loads(mc_grid_sizefac_pickle)
	mc.inimf=pickle.loads(mc_inimf_pickle)
	mc.ku=pickle.loads(mc_ku_pickle)
	mc.macbf=pickle.loads(mc_macbf_pickle)
	mc.maccap=pickle.loads(mc_maccap_pickle)
	mc.maccells=pickle.loads(mc_maccells_pickle)
	mc.maccols=pickle.loads(mc_maccols_pickle)
	mc.macconnect=pickle.loads(mc_macconnect_pickle)
	mc.macid=pickle.loads(mc_macid_pickle)
	mc.macscalefac=pickle.loads(mc_macscalefac_pickle)
	mc.macshare=pickle.loads(mc_macshare_pickle)
	mc.mactopfill=pickle.loads(mc_mactopfill_pickle)
	mc.macposix=pickle.loads(mc_macposix_pickle)
	mc.matrixbf=pickle.loads(mc_matrixbf_pickle)
	mc.matrixdef=pickle.loads(mc_matrixdef_pickle)
	mc.matrixdeffi=pickle.loads(mc_matrixdeffi_pickle)
	mc.md_area=pickle.loads(mc_md_area_pickle)
	mc.md_contact=pickle.loads(mc_md_contact_pickle)
	mc.md_depth=pickle.loads(mc_md_depth_pickle)
	mc.md_pos=pickle.loads(mc_md_pos_pickle)
	mc.md_share=pickle.loads(mc_md_share_pickle)
	mc.md_macdepth=pickle.loads(mc_md_macdepth_pickle)
	mc.mgrid=pickle.loads(mc_mgrid_pickle)
	mc.mxdepth_cr=pickle.loads(mc_mxdepth_cr_pickle)
	mc.onepartpercell=pickle.loads(mc_onepartpercell_pickle)
	mc.outdir=pickle.loads(mc_outdir_pickle)
	mc.p_cH2O=pickle.loads(mc_p_cH2O_pickle)
	mc.p_ku=pickle.loads(mc_p_ku_pickle)
	mc.p_th=pickle.loads(mc_p_th_pickle)
	mc.part_sizefac=pickle.loads(mc_part_sizefac_pickle)
	mc.precf=pickle.loads(mc_precf_pickle)
	mc.psi=pickle.loads(mc_psi_pickle)
	mc.refarea=pickle.loads(mc_refarea_pickle)
	mc.smooth=pickle.loads(mc_smooth_pickle)
	mc.soildepth=pickle.loads(mc_soildepth_pickle)
	mc.soilgrid=pickle.loads(mc_soilgrid_pickle)
	mc.soilmatrix=pickle.loads(mc_soilmatrix_pickle)
	mc.stain_res=pickle.loads(mc_stain_res_pickle)
	mc.subsfac=pickle.loads(mc_subsfac_pickle)
	mc.t_cdf_fast=pickle.loads(mc_t_cdf_fast_pickle)
	mc.t_cdf_slow=pickle.loads(mc_t_cdf_slow_pickle)
	mc.t_dini=pickle.loads(mc_t_dini_pickle)
	mc.t_dmn=pickle.loads(mc_t_dmn_pickle)
	mc.t_dmx=pickle.loads(mc_t_dmx_pickle)
	mc.t_end=pickle.loads(mc_t_end_pickle)
	mc.theta=pickle.loads(mc_theta_pickle)
	mc.tracer_horgrid=pickle.loads(mc_tracer_horgrid_pickle)
	mc.tracer_t_ex=pickle.loads(mc_tracer_t_ex_pickle)
	mc.tracer_vertgrid=pickle.loads(mc_tracer_vertgrid_pickle)
	mc.tracerbf=pickle.loads(mc_tracerbf_pickle)
	mc.wd=pickle.loads(mc_wd_pickle)
	mc.zgrid=pickle.loads(mc_zgrid_pickle)

	print('updated mc from '+fname)
	return mc


def echoRD_pick_in(mc,particles,npart,precTS,fname):
	#mc
	mc_D_pickle=pickle.dumps(mc.D)
	mc_FC_pickle=pickle.dumps(mc.FC)
	mc_a_velocity_pickle=pickle.dumps(mc.a_velocity)
	mc_a_velocity_real_pickle=pickle.dumps(mc.a_velocity_real)
	mc_cH2O_pickle=pickle.dumps(mc.cH2O)
	mc_dpsidtheta_pickle=pickle.dumps(mc.dpsidtheta)
	mc_grid_sizefac_pickle=pickle.dumps(mc.grid_sizefac)
	mc_inimf_pickle=pickle.dumps(mc.inimf)
	mc_ku_pickle=pickle.dumps(mc.ku)
	mc_macbf_pickle=pickle.dumps(mc.macbf)
	mc_maccap_pickle=pickle.dumps(mc.maccap)
	mc_maccells_pickle=pickle.dumps(mc.maccells)
	mc_maccols_pickle=pickle.dumps(mc.maccols)
	mc_macconnect_pickle=pickle.dumps(mc.macconnect)
	mc_macid_pickle=pickle.dumps(mc.macid)
	mc_macscalefac_pickle=pickle.dumps(mc.macscalefac)
	mc_macshare_pickle=pickle.dumps(mc.macshare)
	mc_mactopfill_pickle=pickle.dumps(mc.mactopfill)
	mc_matrixbf_pickle=pickle.dumps(mc.matrixbf)
	mc_matrixdef_pickle=pickle.dumps(mc.matrixdef)
	mc_matrixdeffi_pickle=pickle.dumps(mc.matrixdeffi)
	mc_md_area_pickle=pickle.dumps(mc.md_area)
	mc_md_contact_pickle=pickle.dumps(mc.md_contact)
	mc_md_depth_pickle=pickle.dumps(mc.md_depth)
	mc_md_pos_pickle=pickle.dumps(mc.md_pos)
	mc_md_share_pickle=pickle.dumps(mc.md_share)
	mc_md_macdepth_pickle=pickle.dumps(mc.md_macdepth)
	mc_mgrid_pickle=pickle.dumps(mc.mgrid)
	mc_mxdepth_cr_pickle=pickle.dumps(mc.mxdepth_cr)
	mc_onepartpercell_pickle=pickle.dumps(mc.onepartpercell)
	mc_outdir_pickle=pickle.dumps(mc.outdir)
	mc_p_cH2O_pickle=pickle.dumps(mc.p_cH2O)
	mc_p_ku_pickle=pickle.dumps(mc.p_ku)
	mc_p_th_pickle=pickle.dumps(mc.p_th)
	mc_part_sizefac_pickle=pickle.dumps(mc.part_sizefac)
	mc_precf_pickle=pickle.dumps(mc.precf)
	mc_psi_pickle=pickle.dumps(mc.psi)
	mc_refarea_pickle=pickle.dumps(mc.refarea)
	mc_smooth_pickle=pickle.dumps(mc.smooth)
	mc_soildepth_pickle=pickle.dumps(mc.soildepth)
	mc_soilgrid_pickle=pickle.dumps(mc.soilgrid)
	mc_soilmatrix_pickle=pickle.dumps(mc.soilmatrix)
	mc_stain_res_pickle=pickle.dumps(mc.stain_res)
	mc_subsfac_pickle=pickle.dumps(mc.subsfac)
	mc_t_cdf_fast_pickle=pickle.dumps(mc.t_cdf_fast)
	mc_t_cdf_slow_pickle=pickle.dumps(mc.t_cdf_slow)
	mc_t_dini_pickle=pickle.dumps(mc.t_dini)
	mc_t_dmn_pickle=pickle.dumps(mc.t_dmn)
	mc_t_dmx_pickle=pickle.dumps(mc.t_dmx)
	mc_t_end_pickle=pickle.dumps(mc.t_end)
	mc_theta_pickle=pickle.dumps(mc.theta)
	mc_tracer_horgrid_pickle=pickle.dumps(mc.tracer_horgrid)
	mc_tracer_t_ex_pickle=pickle.dumps(mc.tracer_t_ex)
	mc_tracer_vertgrid_pickle=pickle.dumps(mc.tracer_vertgrid)
	mc_tracerbf_pickle=pickle.dumps(mc.tracerbf)
	mc_wd_pickle=pickle.dumps(mc.wd)
	mc_zgrid_pickle=pickle.dumps(mc.zgrid)

	mc_pickle=pickle.dumps([mc_D_pickle,mc_FC_pickle,mc_a_velocity_pickle,mc_a_velocity_real_pickle,mc_cH2O_pickle,mc_dpsidtheta_pickle,mc_grid_sizefac_pickle,mc_inimf_pickle,mc_ku_pickle,mc_macbf_pickle,mc_maccap_pickle,mc_maccells_pickle,mc_maccols_pickle,mc_macconnect_pickle,mc_macid_pickle,mc_mactopfill_pickle,mc_macscalefac_pickle,mc_macshare_pickle,mc_matrixbf_pickle,mc_matrixdef_pickle,mc_matrixdeffi_pickle,mc_md_area_pickle,mc_md_contact_pickle,mc_md_depth_pickle,mc_md_pos_pickle,mc_md_share_pickle,mc_md_macdepth_pickle,mc_mgrid_pickle,mc_mxdepth_cr_pickle,mc_onepartpercell_pickle,mc_outdir_pickle,mc_p_cH2O_pickle,mc_p_ku_pickle,mc_p_th_pickle,mc_part_sizefac_pickle,mc_precf_pickle,mc_psi_pickle,mc_refarea_pickle,mc_smooth_pickle,mc_soildepth_pickle,mc_soilgrid_pickle,mc_soilmatrix_pickle,mc_stain_res_pickle,mc_subsfac_pickle,mc_t_cdf_fast_pickle,mc_t_cdf_slow_pickle,mc_t_dini_pickle,mc_t_dmn_pickle,mc_t_dmx_pickle,mc_t_end_pickle,mc_theta_pickle,mc_tracer_horgrid_pickle,mc_tracer_t_ex_pickle,mc_tracer_vertgrid_pickle,mc_tracerbf_pickle,mc_wd_pickle,mc_zgrid_pickle])

	#particles
	part_pickle=pickle.dumps(particles)

	#npart
	npart_pickle=pickle.dumps(npart)

	#precTS
	prec_pickle=pickle.dumps(precTS)

	echoRD_pickle=pickle.dumps([mc_pickle,part_pickle,npart_pickle,prec_pickle])

	f = open(fname,"wb")
	pickle.dump(echoRD_pickle, f, protocol=2)
	f.close()
	print('wrote echoRD state to '+fname)

def echoRD_pick_out(mc,fname):
	f = open(fname,"rb")
	echoRD_pickle_l = pickle.load(f)
	f.close()

	[mc_pickle_l,part_pickle_l,npart_pickle_l,prec_pickle_l]=pickle.loads(echoRD_pickle_l)

	#mc
	[mc_D_pickle,mc_FC_pickle,mc_a_velocity_pickle,mc_a_velocity_real_pickle,mc_cH2O_pickle,mc_dpsidtheta_pickle,mc_grid_sizefac_pickle,mc_inimf_pickle,mc_ku_pickle,mc_macbf_pickle,mc_maccap_pickle,mc_maccells_pickle,mc_maccols_pickle,mc_macconnect_pickle,mc_macid_pickle,mc_mactopfill_pickle,mc_macscalefac_pickle,mc_macshare_pickle,mc_matrixbf_pickle,mc_matrixdef_pickle,mc_matrixdeffi_pickle,mc_md_area_pickle,mc_md_contact_pickle,mc_md_depth_pickle,mc_md_pos_pickle,mc_md_share_pickle,mc_md_macdepth_pickle,mc_mgrid_pickle,mc_mxdepth_cr_pickle,mc_onepartpercell_pickle,mc_outdir_pickle,mc_p_cH2O_pickle,mc_p_ku_pickle,mc_p_th_pickle,mc_part_sizefac_pickle,mc_precf_pickle,mc_psi_pickle,mc_refarea_pickle,mc_smooth_pickle,mc_soildepth_pickle,mc_soilgrid_pickle,mc_soilmatrix_pickle,mc_stain_res_pickle,mc_subsfac_pickle,mc_t_cdf_fast_pickle,mc_t_cdf_slow_pickle,mc_t_dini_pickle,mc_t_dmn_pickle,mc_t_dmx_pickle,mc_t_end_pickle,mc_theta_pickle,mc_tracer_horgrid_pickle,mc_tracer_t_ex_pickle,mc_tracer_vertgrid_pickle,mc_tracerbf_pickle,mc_wd_pickle,mc_zgrid_pickle]=pickle.loads(mc_pickle_l)

	mc.D=pickle.loads(mc_D_pickle)
	mc.FC=pickle.loads(mc_FC_pickle)
	mc.a_velocity=pickle.loads(mc_a_velocity_pickle)
	mc.a_velocity_real=pickle.loads(mc_a_velocity_real_pickle)
	mc.cH2O=pickle.loads(mc_cH2O_pickle)
	mc.dpsidtheta=pickle.loads(mc_dpsidtheta_pickle)
	mc.grid_sizefac=pickle.loads(mc_grid_sizefac_pickle)
	mc.inimf=pickle.loads(mc_inimf_pickle)
	mc.ku=pickle.loads(mc_ku_pickle)
	mc.macbf=pickle.loads(mc_macbf_pickle)
	mc.maccap=pickle.loads(mc_maccap_pickle)
	mc.maccells=pickle.loads(mc_maccells_pickle)
	mc.maccols=pickle.loads(mc_maccols_pickle)
	mc.macconnect=pickle.loads(mc_macconnect_pickle)
	mc.macid=pickle.loads(mc_macid_pickle)
	mc.macscalefac=pickle.loads(mc_macscalefac_pickle)
	mc.macshare=pickle.loads(mc_macshare_pickle)
	mc.mactopfill=pickle.loads(mc_mactopfill_pickle)
	mc.matrixbf=pickle.loads(mc_matrixbf_pickle)
	mc.matrixdef=pickle.loads(mc_matrixdef_pickle)
	mc.matrixdeffi=pickle.loads(mc_matrixdeffi_pickle)
	mc.md_area=pickle.loads(mc_md_area_pickle)
	mc.md_contact=pickle.loads(mc_md_contact_pickle)
	mc.md_depth=pickle.loads(mc_md_depth_pickle)
	mc.md_pos=pickle.loads(mc_md_pos_pickle)
	mc.md_share=pickle.loads(mc_md_share_pickle)
	mc.md_macdepth=pickle.loads(mc_md_macdepth_pickle)
	mc.mgrid=pickle.loads(mc_mgrid_pickle)
	mc.mxdepth_cr=pickle.loads(mc_mxdepth_cr_pickle)
	mc.onepartpercell=pickle.loads(mc_onepartpercell_pickle)
	mc.outdir=pickle.loads(mc_outdir_pickle)
	mc.p_cH2O=pickle.loads(mc_p_cH2O_pickle)
	mc.p_ku=pickle.loads(mc_p_ku_pickle)
	mc.p_th=pickle.loads(mc_p_th_pickle)
	mc.part_sizefac=pickle.loads(mc_part_sizefac_pickle)
	mc.precf=pickle.loads(mc_precf_pickle)
	mc.psi=pickle.loads(mc_psi_pickle)
	mc.refarea=pickle.loads(mc_refarea_pickle)
	mc.smooth=pickle.loads(mc_smooth_pickle)
	mc.soildepth=pickle.loads(mc_soildepth_pickle)
	mc.soilgrid=pickle.loads(mc_soilgrid_pickle)
	mc.soilmatrix=pickle.loads(mc_soilmatrix_pickle)
	mc.stain_res=pickle.loads(mc_stain_res_pickle)
	mc.subsfac=pickle.loads(mc_subsfac_pickle)
	mc.t_cdf_fast=pickle.loads(mc_t_cdf_fast_pickle)
	mc.t_cdf_slow=pickle.loads(mc_t_cdf_slow_pickle)
	mc.t_dini=pickle.loads(mc_t_dini_pickle)
	mc.t_dmn=pickle.loads(mc_t_dmn_pickle)
	mc.t_dmx=pickle.loads(mc_t_dmx_pickle)
	mc.t_end=pickle.loads(mc_t_end_pickle)
	mc.theta=pickle.loads(mc_theta_pickle)
	mc.tracer_horgrid=pickle.loads(mc_tracer_horgrid_pickle)
	mc.tracer_t_ex=pickle.loads(mc_tracer_t_ex_pickle)
	mc.tracer_vertgrid=pickle.loads(mc_tracer_vertgrid_pickle)
	mc.tracerbf=pickle.loads(mc_tracerbf_pickle)
	mc.wd=pickle.loads(mc_wd_pickle)
	mc.zgrid=pickle.loads(mc_zgrid_pickle)

	#particles
	particles=pickle.loads(part_pickle_l)

	#npart
	npart=pickle.loads(npart_pickle_l)

	precTS=pickle.loads(prec_pickle_l)

	print('updated echoRD from'+fname)
	return [mc,particles,npart,precTS]